---
active: true
iteration: 1
max_iterations: 25
completion_promise: "NOTIFICATIONS DONE"
started_at: "2026-01-18T00:46:00Z"
feature_name: "Notifications Push"
notion_report_page: "2ec98c38-d2a6-819c-9ed6-c1501a261d65"
---

Implémenter un système de notifications push complet pour Izzico.

OBJECTIF: Créer un système de notifications en temps réel pour informer les utilisateurs des événements importants.

ÉTAPES REQUISES:

1. BASE DE DONNÉES (Supabase)
   - Créer migration SQL numérotée (vérifier dernier numéro dans supabase/migrations/)
   - Table notifications avec: id, user_id, type, title, message, read, created_at, metadata (jsonb)
   - Types: task_assigned, document_expiring, maintenance_update, payment_received, new_message
   - RLS policies pour que chaque user ne voit que ses notifications

2. SERVICE BACKEND
   - Créer lib/services/notification-service.ts
   - Fonctions: createNotification, getUnreadCount, markAsRead, markAllAsRead, getUserNotifications
   - Types TypeScript dans lib/types/notifications.types.ts

3. COMPOSANT UI
   - Créer components/notifications/NotificationBell.tsx
   - Badge avec compteur de non-lues
   - Dropdown avec liste des notifications
   - Design V3-fun avec couleurs selon le rôle utilisateur
   - Animation Framer Motion pour nouvelles notifications

4. INTÉGRATION
   - Ajouter NotificationBell dans le header existant
   - API route /api/notifications pour CRUD

5. TESTS
   - Vérifier que les notifications s'affichent
   - Vérifier le marquage comme lu
   - Vérifier le compteur

CRITÈRES DE SUCCÈS:
- Le composant NotificationBell s'affiche dans le header
- Les notifications non lues affichent un badge avec le compte
- Cliquer sur une notification la marque comme lue
- Design cohérent avec V3-fun (rounded corners, gradients, animations)

RAPPORT NOTION OBLIGATOIRE:
AVANT d'émettre le promise final, créer un rapport dans Notion:
- Page parent ID: 2ec98c38-d2a6-819c-9ed6-c1501a261d65
- Utiliser NOTION_CREATE_NOTION_PAGE puis NOTION_ADD_MULTIPLE_PAGE_CONTENT
- Inclure: statistiques, fichiers modifiés, migrations, résultat

Output: <promise>NOTIFICATIONS DONE</promise> quand le système est fonctionnel et le rapport Notion créé.
